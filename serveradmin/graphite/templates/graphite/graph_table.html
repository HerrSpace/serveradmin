{% extends base_template %}
{% load url from future %}

{% block title %}Graphs for {{ hostname }}{% endblock %}

{% block content %}
{% if not is_ajax %}
<h2>Graphs for {{ hostname }}</h2>

<form action="" method="POST">
    <table>
        <tr>
            <th>From:</th>
            <td>
                <input name="from" type="text" value="{{ from }}" />
            </td>
        </tr>

        <tr>
            <th>Until:</th>
            <td>
                <input name="until" type="text" value="{{ until }}" />
            </td>
        </tr>
{% csrf_token %}
        <tr>
            <th></th>
            <td>
                <input name="submit" type="submit" value="Submit" />
            </td>
        </tr>
    </table>
</form>
{% endif %}

{% if is_ajax %}
<p>
    <a href="{{ link }}">
        <img src="{{ STATIC_URL }}link.png" alt="Link to this page"
		     title="Link to this page" />
    </a>
</p>
{% endif %}

{% if not is_ajax %}
{% for name, description in graph_descriptions %}
<div id="graph_desc_{{ forloop.counter }}"
     title="Graph description for {{ name }}"
     style="display:none;">{{ description|safe }}</div>
{% endfor %}
{% endif %}

{% for name, graph_column in graph_table %}
<h3>{{ name }}
{% if not is_ajax %}
    <img src="{{ STATIC_URL}}help.png" class="graph_desc_icon"
                                       data-graphname="{{ forloop.counter }}" />
{% endif %}
</h3>

<table>
    <tr>
{% for column_name, graph in graph_column %}
        <th>{{ column_name }}</th>
{% endfor %}
    </tr>

    <tr>
{% for column_name, graph in graph_column %}
        <td>
            <img src="{{ graph }}" alt="{{ name }} {{ column_name }}"
                 class="graph" />
        </td>
{% endfor %}
    </tr>
</table>
{% endfor %}
{% endblock content %}

{% block additional_body %}

{% if not is_ajax %}
<script type="text/javascript" src="{{ STATIC_URL }}servermonitor/servermonitor.js"></script>
{% endif %}

{% endblock additional_body %}
