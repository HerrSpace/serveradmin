{% extends "base.html" %}
{% load url from future %}

{% block title %}Servertype {{ servertype.name }}{% endblock %}

{% block content %}
<h2>Servertype {{ servertype.name }}</h2>

<table>
    <tr>
        <th>Attribute</th>
        <th>Type</th>
        <th>Multi</th>
        <th>Required</th>
        <th>Validation</th>
        <th>Default</th>
{% if perms.dataset.change_servertype %}
        <th>Action</th>
{% endif %}
    </tr>
{% for attr in attributes %}
    <tr class="{% cycle 'row_a' 'row_b' %}">
        <td>{{ attr.name }}</td>
        <td>{{ attr.type }}</td>
        <td>{{ attr.multi }}</td>
        <td>{{ attr.required }}</td>
        <td>{% if attr.regexp %}{{ attr.regexp }}{% else %}<i>None</i>{% endif %}</td>
        <td>{% if attr.default %}{{ attr.default }}{% else %}<i>None</i>{% endif %}</td>
{% if perms.dataset.change_servertype %}
        <td>
            <a href="{% url 'dataset_edit_servertype_attr' servertype.name attr.name %}">edit</a>
            <a href="{% url 'dataset_delete_servertype_attr' servertype.name attr.name %}">delete</a>
        </td>
{% endif %}
    </tr>
{% endfor %}
</table>

{% if perms.dataset.change_servertype %}
<p><a href="{% url 'dataset_add_servertype_attr' servertype.name %}">Add
attribute</a></p>
{% endif %}

{% if perms.dataset.delete_servertype %}
<h3>Delete servertype</h3>
<form method="post" action="{% url 'dataset_delete_servertype' servertype.name %}">
{% csrf_token %}
<p><label><input type="checkbox" name="confirm" />
 I know that I will kill <strong>ALL</strong> servers which belong
 to this servertype.</label></p>
 <p><input type="submit" value="Delete servertype and servers" /></p>
 </form>
 {% endif %}

{% if perms.dataset.add_servertype %}
<h3>Copy servertype</h3>
<form method="post" action="{% url 'dataset_copy_servertype' servertype.name %}">
{% csrf_token %}
<p>Target servertype: <input type="text" name="name" /> <input type="submit" value="Copy" /></p>
 <p>If the target servertype doesn't exist it will be automatically created.</p>
 </form>
 {% endif %}

{% endblock %}
